<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>内在女神原型测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --paper-light: #fdf6e3;
            --ink: #2d241c;
            --gold: #b38b4d;
            --accent: #8b5e3c;
        }

        /* 基础锁定 */
        html, body {
            height: 100%; width: 100%; overflow: hidden;
            position: fixed; background-color: #e8d5b7;
            font-family: 'Noto Serif SC', serif; color: var(--ink);
        }

        /* 背景图 */
        .bj-background {
            position: fixed; inset: 0; z-index: -2;
            background: url('bj.png') center center / cover no-repeat;
            filter: brightness(0.9) contrast(1.1);
        }

        /* 第一页整体模糊控制 */
        .page-blur-wrapper {
            transition: filter 2.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 2s ease;
        }
        .is-blur { filter: blur(30px); opacity: 0; }
        .is-clear { filter: blur(0); opacity: 1; }

        /* 装饰图：进一步放大 */
        .decor-img {
            position: fixed; width: 45vw; max-width: 280px;
            z-index: 50; transition: all 1.2s ease;
            pointer-events: none;
        }
        .img-top-left { top: -2%; left: -2%; }
        .img-bottom-right { bottom: -2%; right: -2%; }
        .scatter-tl { transform: translate(-100%, -100%) rotate(-30deg); opacity: 0; }
        .scatter-br { transform: translate(100%, 100%) rotate(30deg); opacity: 0; }

        /* 内容底盘 */
        .content-plate {
            background: rgba(253, 246, 227, 0.82);
            backdrop-filter: blur(10px);
            padding: 1.8rem; border-radius: 24px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            border: 1.5px solid rgba(179, 139, 77, 0.3);
            width: 100%; max-width: 420px; z-index: 10;
        }

        /* 文字粗度强化 */
        .para {
            font-size: 15px; line-height: 1.6; font-weight: 700;
            text-align: justify; margin-bottom: 0.8rem;
        }
        .highlight-text {
            font-size: 1.3rem; font-weight: 900;
            margin: 0.8rem 0; color: var(--accent);
            letter-spacing: 0.15em;
        }

        /* 球体 */
        .qiu-container {
            position: relative; width: 140px; height: 140px; margin: 0.5rem auto;
        }
        .qiu-img {
            width: 100%; height: 100%; transition: all 1.5s cubic-bezier(0.7, 0, 0.3, 1);
            animation: rotate-qiu 25s linear infinite;
        }
        @keyframes rotate-qiu { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .qiu-zoom { transform: scale(20); opacity: 0; filter: blur(20px); }

        /* 开启旅程按钮 UI 强化 */
        .btn-start {
            background: linear-gradient(145deg, #966b4f, #724a30);
            color: #fff; padding: 0.9rem 4rem; border-radius: 50px;
            font-size: 1.15rem; font-weight: 900; letter-spacing: 0.4em;
            box-shadow: 0 10px 25px rgba(114, 74, 48, 0.5);
            border: 2px solid rgba(179, 139, 77, 0.5);
            transition: all 0.4s; position: relative; overflow: hidden;
        }
        .btn-start::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg); animation: flow 3s infinite;
        }
        @keyframes flow { 0% { left: -100%; } 100% { left: 100%; } }

        /* 全屏过渡/加载页 */
        .loading-screen {
            position: fixed; inset: 0; background: #ede3d1;
            z-index: 200; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .walking-video { width: 180px; mix-blend-mode: multiply; }

        /* 问卷页 */
        .quiz-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 30px; padding: 2rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }

        .fade-enter-active, .fade-leave-active { transition: opacity 1s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        
        [v-cloak] { display: none; }
    </style>
</head>
<body>
    <div class="bj-background"></div>

    <div id="app" v-cloak>
        <!-- 初始进入时的加载动画（小人先走5秒） -->
        <transition name="fade">
            <div v-if="initLoading" class="loading-screen">
                <video class="walking-video" autoplay loop muted playsinline>
                    <source src="zoulu.mp4" type="video/mp4">
                </video>
                <p class="mt-6 text-[10px] tracking-[0.5em] opacity-40 uppercase">Awakening the Goddess Within</p>
            </div>
        </transition>

        <transition name="fade" mode="out-in">
            <!-- 1. 封面页 -->
            <div v-if="step === 'start'" key="start" 
                 :class="['h-[100dvh] flex items-center justify-center p-6 page-blur-wrapper', initLoading ? 'is-blur' : 'is-clear']">
                
                <img src="left-top.png" :class="['decor-img img-top-left', { 'scatter-tl': isLeaving }]">
                <img src="right-bottom.png" :class="['decor-img img-bottom-right', { 'scatter-br': isLeaving }]">

                <div class="content-plate">
                    <div class="text-content">
                        <p class="text-[10px] tracking-[0.6em] opacity-40 text-center mb-2">THE GODDESS WITHIN</p>
                        
                        <p class="para">在你的心底，住着一位古老的女神。她悄悄影响着你的直觉、选择、关系模式、情绪反应——甚至决定你“为什么是现在的你”。</p>
                        
                        <p class="para">这份测试并不是为了把你“分成哪一类”，而是为了启动你内在的神性力量。让我们一起穿越这段旅程，触碰你最深处的性格原型。</p>

                        <p class="text-center text-xs font-bold opacity-50 mt-2">请凭第一直觉作答。答案指向灵魂的方向。</p>

                        <div class="qiu-container">
                            <img src="qiu.png" :class="['qiu-img', { 'qiu-zoom': isLeaving }]">
                        </div>

                        <div class="highlight-text text-center">
                            现在 放松下来<br>她正等着你
                        </div>

                        <div class="flex justify-center">
                            <button @click="triggerJourney" class="btn-start">
                                开启旅程
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. 转场加载动画（点击后，时长加长至6秒） -->
            <div v-else-if="step === 'walking'" key="walking" class="loading-screen">
                <video class="walking-video" autoplay loop muted playsinline>
                    <source src="zoulu.mp4" type="video/mp4">
                </video>
                <p class="mt-6 text-[10px] tracking-[0.5em] opacity-30 animate-pulse uppercase">Entering the Inner Forest</p>
            </div>

            <!-- 3. 测试页 -->
            <div v-else-if="step === 'quiz'" key="quiz" class="h-[100dvh] flex flex-col items-center justify-center p-6">
                <div class="w-full max-w-md quiz-card">
                    <div class="flex justify-between text-[10px] opacity-40 mb-6">
                        <button @click="goBack" v-if="currentIndex > 0" class="font-bold">← 返回</button>
                        <span class="font-bold">{{ currentIndex + 1 }} / 12</span>
                    </div>
                    <h2 class="text-xl font-bold mb-8 text-center leading-snug">{{ questions[currentIndex].title }}</h2>
                    <div class="grid gap-4">
                        <div v-for="(opt, key) in questions[currentIndex].options" 
                             @click="handleSelect(key)"
                             class="p-5 bg-stone-100/50 rounded-2xl text-[15px] font-bold border border-amber-900/5 active:bg-amber-100 transition-all cursor-pointer">
                            <span class="text-amber-800/40 mr-2">{{ key }}</span> {{ opt }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. 结果页 -->
            <div v-else-if="step === 'result'" key="result" class="h-[100dvh] flex flex-col items-center justify-center p-6 overflow-y-auto">
                <div class="w-full max-w-md text-center py-10">
                    <p class="text-[11px] tracking-widest opacity-40 mb-4">唤醒的内在神性是</p>
                    <h2 class="text-5xl font-bold text-[#8b5e3c] tracking-widest mb-12">{{ resultData.name }}</h2>
                    <div class="bg-white/70 p-8 rounded-3xl text-justify text-[16px] leading-loose font-bold shadow-xl border border-white">
                        {{ resultData.desc }}
                    </div>
                    <button @click="reset" class="mt-16 text-[10px] opacity-30 tracking-[0.4em] uppercase font-bold">—— 重新开启旅程 ——</button>
                </div>
            </div>

        </transition>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        createApp({
            setup() {
                const step = ref('start');
                const initLoading = ref(true); // 初始加载开关
                const isLeaving = ref(false);
                const currentIndex = ref(0);
                const scores = ref({ A: 0, B: 0, C: 0, D: 0, E: 0, F: 0 });
                const choiceHistory = ref([]);

                // 初始生命周期：进场等待
                onMounted(() => {
                    setTimeout(() => {
                        initLoading.value = false;
                    }, 5000); // 初始小人走5秒
                });

                const triggerJourney = () => {
                    isLeaving.value = true;
                    // 先执行图案飞散和球体放大
                    setTimeout(() => {
                        step.value = 'walking';
                        // 点击后的小人转场加长至 6秒
                        setTimeout(() => {
                            step.value = 'quiz';
                        }, 6000);
                    }, 1200);
                };

                const handleSelect = (key) => {
                    scores.value[key]++;
                    choiceHistory.value.push(key);
                    if (currentIndex.value < 11) currentIndex.value++;
                    else step.value = 'result';
                };

                const goBack = () => {
                    const last = choiceHistory.value.pop();
                    scores.value[last]--;
                    currentIndex.value--;
                };

                const reset = () => {
                    isLeaving.value = false;
                    step.value = 'start';
                    currentIndex.value = 0;
                    choiceHistory.value = [];
                    Object.keys(scores.value).forEach(k => scores.value[k] = 0);
                };

                const resultData = computed(() => {
                    let maxKey = 'A';
                    for (let key in scores.value) if (scores.value[key] > scores.value[maxKey]) maxKey = key;
                    const goddessData = {
                        A: { name: "阿尔忒弥斯", desc: "你是独立的狩猎者，内心像月光下的森林一样清冷而自由。你不需要依赖外界的定义，在独处与自然中能获得最强大的力量。" },
                        B: { name: "厄俄斯", desc: "你是黎明女神，天生带有疗愈他人的温暖能量，你的存在本身就是一种希望，对世间一切美好事物极具感召力。" },
                        C: { name: "得墨忒耳", desc: "你是大地之母，丰盛、踏实，是天生的照顾者。你拥有将荒芜变为繁茂的能力，灵魂深处流淌着无尽的爱。" },
                        D: { name: "芙蕾雅", desc: "你是爱与美的火，热情奔放。你从不掩饰自己的欲望与生命力，生命中不可缺少艺术、爱与感官带来的愉悦。" },
                        E: { name: "赫卡忒", desc: "你是洞察者，穿梭于迷雾与边界。你拥有看穿真相的深度智慧，能在黑暗中指引方向，是灵魂的导师。" },
                        F: { name: "摩里甘", desc: "你是重生者，在风暴中淬炼灵魂。你无惧毁灭，因为你拥有从灰烬中站起的惊人力量，是极致韧性的象征。" }
                    };
                    return goddessData[maxKey];
                });

                const questions = [
                    { title: "夜色降临，你推开一间静谧的木屋。圆桌上放着六件物品，你最先被哪个吸引？", options: { A: "月桂叶", B: "小油灯", C: "麦穗", D: "玫瑰花", E: "黑色羽毛", F: "刻纹石片" } },
                    { title: "你握起物品，眼前浮现一扇门。门外吹来阵阵风，你听见——", options: { A: "柔和的夜风吹动树叶", B: "温暖的晨风带甜味", C: "土壤湿润的气息", D: "轻轻的笑声与低语", E: "不知名的小声呢喃", F: "低沉而空旷的风鸣" } },
                    { title: "走出门，你站在森林入口。你本能地朝哪边走？", options: { A: "月光照亮的小径", B: "晨光泛金的空地", C: "有草香的田边", D: "歌声萦绕的花园", E: "影子晃动的深林", F: "风声狂烈的山崖" } },
                    { title: "继续前行，一种强烈的感觉浮现心头：", options: { A: "我要单独前进", B: "有人在温柔陪伴我", C: "想确认大家是否安全", D: "探索新事物的兴奋", E: "感觉到隐藏的真相", F: "我正经历重大的转变" } },
                    { title: "一只动物出现在你面前，你觉得它想传达：", options: { A: "鹿：保持独立", B: "金翅鸟：带去希望", C: "狐狸：照顾好族群", D: "猫：享受当下的美", E: "黑狗：看清迷雾后的事", F: "乌鸦：勇敢迎接变化" } },
                    { title: "地面出现一个符号，你的第一反应是：", options: { A: "指引方向的标记", B: "温暖的祝福", C: "保护家人的符咒", D: "绝美的艺术创作", E: "某种远古的知识", F: "界线与禁忌的提醒" } },
                    { title: "不远处升起轻烟，你闻到的味道像——", options: { A: "清冽的草木香", B: "金盏花与柑橘", C: "小麦与烤面包的安稳", D: "玫瑰与浪漫的香脂", E: "艾草与神秘的柏树", F: "烟熏木与深沉药草" } },
                    { title: "烟雾散去，一件仪式道具让你想触碰：", options: { A: "弯月形的银弓", B: "金色丝绸缎带", C: "暖色的陶制水碗", D: "镶嵌宝石的铜镜", E: "三叉形的古老钥匙", F: "燃烧过的黑色羽毛" } },
                    { title: "前方岔路有石碑，你选择哪一条路？", options: { A: "自由之路", B: "希望之路", C: "丰盛之路", D: "创造之路", E: "洞察之路", F: "重生之路" } },
                    { title: "路边忽然传来一句低语，最击中你的是：", options: { A: "你不需要被谁批准", B: "一切都会好起来的", C: "他们正在需要你", D: "你值得被爱与被赞美", E: "看清它，你便会明白", F: "穿过痛苦你会更强" } },
                    { title: "天空浮现一句话，让你最有共鸣的是：", options: { A: "保持方向", B: "保持温暖", C: "保持踏实", D: "保持欲望", E: "保持敏锐", F: "保持锋利" } },
                    { title: "最后出现六扇门，你走进哪一扇？", options: { A: "月纹银白之门", B: "朝阳浅金之门", C: "麦穗暖黄之门", D: "玫瑰玫红之门", E: "钥匙墨蓝之门", F: "乌鸦深紫之门" } }
                ];

                return { step, initLoading, isLeaving, triggerJourney, currentIndex, questions, handleSelect, goBack, resultData, reset };
            }
        }).mount('#app');
    </script>
</body>
</html>
